{
    "name": "Apidoc Generator",
    "description": "Documentation for an apidoc code generator API",
    "base_url": "http://www.apidoc.me",

    "enums": {
        "type_kind": {
            "values": [
                { "name": "primitive" },
                { "name": "model" },
                { "name": "enum" }
            ]
        },

        "header_type": {
            "values": [
                { "name": "string" },
                { "name": "enum" }
            ]
        },

        "parameter_location": {
            "values": [
                { "name": "path" },
                { "name": "query" },
                { "name": "form" }
            ]
        }
    },

    "models": {

        "service_description": {
            "description": "Description of a service",
            "fields": [
                { "name": "enums", "type": "[enum]" },
                { "name": "models", "type": "[model]" },
                { "name": "headers", "type": "[header]" },
                { "name": "resources", "type": "[resource]" },
                { "name": "baseUrl", "type": "string", "required": false },
                { "name": "name", "type": "string" },
                { "name": "package_name", "type": "string", "description": "The package name when used by code generators (e.g. scala package name for the clients)", "required": false },
                { "name": "description", "type": "string", "required": false },
                { "name": "user_agent", "type": "string", "required": false }
            ]
        },

        "enum": {
            "fields": [
                { "name": "name", "type": "string" },
                { "name": "description", "type": "string", "required": false },
                { "name": "values", "type": "[enum_value]" }
            ]
        },

        "enum_value": {
            "fields": [
                { "name": "name", "type": "string" },
                { "name": "description", "type": "string", "required": false }
            ]
        },

        "model": {
            "fields": [
                { "name": "name", "type": "string" },
                { "name": "plural", "type": "string" },
                { "name": "description", "type": "string", "required": false },
                { "name": "fields", "type": "[field]" }
            ]
        },

        "field": {
            "fields": [
                { "name": "name", "type": "string" },
                { "name": "datatype", "type": "type" },
                { "name": "description", "type": "string", "required": false },
                { "name": "required", "type": "boolean" },
                { "name": "default", "type": "string", "required": false },
                { "name": "example", "type": "string", "required": false },
                { "name": "minimum", "type": "long", "required": false },
                { "name": "maximum", "type": "long", "required": false }
            ]
        },

        "type": {
            "fields": [
                { "name": "kind", "type": "type_kind" },
                { "name": "name", "type": "string" },
                { "name": "multiple", "type": "boolean" }
            ]
        },

        "header": {
            "fields": [
                { "name": "name", "type": "string" },
                { "name": "headertype", "type": "header_type" },
                { "name": "headertype_value", "type": "string", "required": false },
                { "name": "description", "type": "string", "required": false },
                { "name": "required", "type": "boolean" },
                { "name": "multiple", "type": "boolean" },
                { "name": "default", "type": "string", "required": false }
            ]
        },

        "resource": {
            "fields": [
                { "name": "model", "type": "model" },
                { "name": "path", "type": "string" },
                { "name": "operations", "type": "[operation]" }
            ]
        },

        "operation": {
            "fields": [
                { "name": "model", "type": "model" },
                { "name": "method", "type": "string" },
                { "name": "path", "type": "string" },
                { "name": "description", "type": "string", "required": false },
                { "name": "body", "type": "type", "required": false },
                { "name": "parameters", "type": "[parameter]" },
                { "name": "responses", "type": "[response]" }
            ]
        },

        "parameter": {
            "fields": [
                { "name": "name", "type": "string" },
                { "name": "datatype", "type": "type" },
                { "name": "location", "type": "parameter_location" },
                { "name": "description", "type": "string", "required": false },
                { "name": "required", "type": "boolean" },
                { "name": "default", "type": "string", "required": false },
                { "name": "example", "type": "string", "required": false },
                { "name": "minimum", "type": "long", "required": false },
                { "name": "maximum", "type": "long", "required": false }
            ]
        },

        "response": {
            "fields": [
                { "name": "code", "type": "integer" },
                { "name": "datatype", "type": "type" }
            ]
        },

        "generator": {
            "description": "The generator metadata.",
            "fields": [
                { "name": "key", "type": "string" },
                { "name": "name", "type": "string" },
                { "name": "language", "type": "string", "required": false },
                { "name": "description", "type": "string", "required": false }
            ]
        },

        "code": {
          "description": "Generated source code.",
          "plural": "code",
          "fields": [
            { "name": "source", "type": "string", "description": "The actual source code." }
          ]
        },

        "error": {
            "fields": [
                { "name": "code", "type": "string", "description": "Machine readable code for this specific error message" },
                { "name": "message", "type": "string", "description": "Description of the error" }
            ]
        }

    },

    "resources": {
        "generator": {
            "operations": [
                {
                    "method": "GET",
                    "description": "Get all available generators",
                    "responses": {
                        "200": { "type": "[generator]" }
                    }
                },
                {
                  "method": "GET",
                  "path": "/:key",
                  "description": "Get the meta data of this generator",
                  "responses": {
                    "200": { "type": "generator" }
                  }
                },
                {
                    "method": "POST",
                    "path": "/:key/execute",
                    "description": "Invoke this generator",
                    "body": { "type": "service_description" },
                    "responses": {
                        "200": { "type": "code" },
                        "409": { "type": "[error]" }
                    }
                }
            ]
        }
    }
}
